# å–®æ©Ÿç‰ˆèˆ‡æ©Ÿè¯ç¶²

## ğŸ”¥ å–®æ©Ÿç‰ˆé…ç½® (1)

```mermaid
flowchart TB
  subgraph æ©Ÿå°
    subgraph PAC
      IIS --- å…±äº«è¨˜æ†¶é«”
      Appä¼ºæœå™¨ --- å…±äº«è¨˜æ†¶é«”
      CodeSys --- å…±äº«è¨˜æ†¶é«”
    end

    subgraph IPC
      æ©Ÿå°è»Ÿé«” --- IIS
    end
  end

  subgraph å¤–éƒ¨
    è¾¦å…¬å®¤è»Ÿé«”
  end

  subgraph æ‰‹æ©Ÿè£ç½®
    App --- Appä¼ºæœå™¨
  end

  subgraph é›²ç«¯
    ERP --- App
  end
```

---

## ğŸ”¥ å–®æ©Ÿç‰ˆé…ç½® (2)

```mermaid
flowchart TB
  subgraph æ©Ÿå°
    subgraph IPC
      æ©Ÿå°è»Ÿé«” --- C#è‡ªå‹•æ§åˆ¶
      Appä¼ºæœå™¨ --- C#è‡ªå‹•æ§åˆ¶
    end
  end

  subgraph å¤–éƒ¨
    è¾¦å…¬å®¤è»Ÿé«”
  end

  subgraph æ‰‹æ©Ÿè£ç½®
    App --- Appä¼ºæœå™¨
  end

  subgraph é›²ç«¯
    ERP --- App
  end
```

---

## ğŸ”¥ æ©Ÿè¯ç¶²é…ç½®

```mermaid
flowchart TB
  subgraph æ©Ÿå°1
    subgraph IPC1
      æ©Ÿå°è»Ÿé«”1 --- è‡ªå‹•æ§åˆ¶1
      Appä¼ºæœå™¨1 --- è‡ªå‹•æ§åˆ¶1
    end
  end

  subgraph æ©Ÿå°2
    subgraph IPC2
      æ©Ÿå°è»Ÿé«”2 --- è‡ªå‹•æ§åˆ¶2
      Appä¼ºæœå™¨2 --- è‡ªå‹•æ§åˆ¶2
    end
  end

  subgraph æ©Ÿå°3
    subgraph IPC3
      æ©Ÿå°è»Ÿé«”3 --- è‡ªå‹•æ§åˆ¶3
      Appä¼ºæœå™¨3 --- è‡ªå‹•æ§åˆ¶3
    end
  end

  subgraph ä¸­å¤®ä¼ºæœå™¨
    Server --- æ©Ÿå°è»Ÿé«”1
    Server --- æ©Ÿå°è»Ÿé«”2
    Server --- æ©Ÿå°è»Ÿé«”3
    Server --- Appä¼ºæœå™¨1
    Server --- Appä¼ºæœå™¨2
    Server --- Appä¼ºæœå™¨3
  end

  subgraph å¤–éƒ¨
    è¾¦å…¬å®¤è»Ÿé«” --- Server
  end

  subgraph æ‰‹æ©Ÿè£ç½®
    AppåŠŸèƒ½1 --- Server
    AppåŠŸèƒ½2 --- Server
    AppåŠŸèƒ½3 --- Server
  end

  subgraph é›²ç«¯
    ERP --- AppåŠŸèƒ½1
    ERP --- AppåŠŸèƒ½2
    ERP --- AppåŠŸèƒ½3
    ERP --- Server
  end
```

---

## ğŸ”¥ å–®æ©Ÿç‰ˆ vs æ©Ÿè¯ç¶²å…§ç¶² vs æ©Ÿè¯ç¶²å¤–ç¶²

<<<<<<< HEAD
| åŠŸèƒ½                               | å–®æ©Ÿç‰ˆ | æ©Ÿè¯ç¶²å…§ç¶² | æ©Ÿè¯ç¶²å¤–ç¶² |
| ---------------------------------- | ------ | ---------- | ---------- |
| ç”¨ USB è¤‡è£½å°ˆæ¡ˆè³‡æ–™å¤¾è‡³æ©Ÿå°è»Ÿé«”    | O      | O          | O          |
| ç”¨ FTP è¤‡è£½å°ˆæ¡ˆè³‡æ–™å¤¾è‡³æ©Ÿå°è»Ÿé«”    | O      | O          | O          |
| ç”¨ Server åŒæ­¥å°ˆæ¡ˆè³‡æ–™å¤¾è‡³æ©Ÿå°è»Ÿé«” |        | O          | O          |
| ç”¨ Server å‚™ä»½å°ˆæ¡ˆè³‡æ–™             |        | O          | O          |
| å°ˆæ¡ˆæ¬Šé™åˆ†åˆ¥                       |        | O          | O          |
| å¯ä½¿ç”¨ OTA æ›´æ–°                    |        |            | O          |
| å¯èˆ‡ ERP äº’å‹•                      |        |            | O          |
| å¯æœé›†ç”¨æˆ¶ç«¯è³‡æ–™                   |        |            | O          |

---

## ğŸ”¥ å–®æ©Ÿè»Ÿé«”ç™»å…¥

```mermaid
sequenceDiagram
  App ->> ERP: ç™»å…¥
  ERP ->> App: é©—è­‰ä¸¦å–å¾—token
  App ->> Appä¼ºæœå™¨: ä½¿ç”¨tokenæ“ä½œæ©Ÿå°
```

---

## ğŸ”¥ æ©Ÿè¯ç¶²(å…§ç¶²)è»Ÿé«”ç™»å…¥

```mermaid
sequenceDiagram
  App ->> ERP: ç™»å…¥
  ERP ->> App: é©—è­‰ä¸¦å–å¾—token
  App ->> Server: å°‡tokenå‚³é€è‡³ä¸­å¤®ä¼ºæœå™¨
  Server ->> Appä¼ºæœå™¨: ä½¿ç”¨tokenæ“ä½œæ©Ÿå°
```

---

## ğŸ”¥ æ©Ÿè¯ç¶²(å¤–ç¶²)è»Ÿé«”ç™»å…¥

```mermaid
sequenceDiagram
  App ->> ERP: ç™»å…¥
  ERP ->> App: é©—è­‰ä¸¦å–å¾—token
  App ->> Server: å°‡tokenå‚³é€è‡³ä¸­å¤®ä¼ºæœå™¨
  Server ->> ERP: é©—è­‰tokenè³‡è¨Š
  ERP ->> Server: é©—è­‰æˆåŠŸ
  Server ->> Appä¼ºæœå™¨: ä½¿ç”¨tokenæ“ä½œæ©Ÿå°
```

---

## ğŸ”¥ è¾¦å…¬å®¤è»Ÿé«”å°ˆæ¡ˆåŒæ­¥

```mermaid
sequenceDiagram
  actor ä½¿ç”¨è€…

  è¾¦å…¬å®¤è»Ÿé«” ->> Server: å•Ÿå‹•å¾Œè©¢å•æ˜¯å¦æœ‰å°ˆæ¡ˆéœ€åŒæ­¥
  Server ->> è¾¦å…¬å®¤è»Ÿé«”: å›æ‡‰åŒæ­¥è³‡è¨Š
  è¾¦å…¬å®¤è»Ÿé«” ->> ä½¿ç”¨è€…: è‹¥æœ‰çš„è©±ï¼Œè©¢å•ä½¿ç”¨è€…
  ä½¿ç”¨è€… ->> è¾¦å…¬å®¤è»Ÿé«”: åŒæ„å¾Œï¼Œé–‹å§‹åŒæ­¥
  è¾¦å…¬å®¤è»Ÿé«” ->> è¾¦å…¬å®¤è»Ÿé«”: åŒæ­¥

  loop æ¯ç•¶æœ‰å°ˆæ¡ˆéœ€åŒæ­¥æ™‚
    Server ->> è¾¦å…¬å®¤è»Ÿé«”: é€šçŸ¥æœ‰æ–°çš„åŒæ­¥è³‡è¨Š
    è¾¦å…¬å®¤è»Ÿé«” ->> ä½¿ç”¨è€…: è‹¥æœ‰çš„è©±ï¼Œè©¢å•ä½¿ç”¨è€…
    ä½¿ç”¨è€… ->> è¾¦å…¬å®¤è»Ÿé«”: åŒæ„å¾Œï¼Œé–‹å§‹åŒæ­¥
    è¾¦å…¬å®¤è»Ÿé«” ->> è¾¦å…¬å®¤è»Ÿé«”: åŒæ­¥
  end

  loop æ¯ç•¶å­˜æª”æ™‚
    è¾¦å…¬å®¤è»Ÿé«” ->> Server: é€šçŸ¥Serveréœ€å‚™ä»½
  end
```

---

## ğŸ”¥ æ©Ÿå°è»Ÿé«”å°ˆæ¡ˆåŒæ­¥

```mermaid
sequenceDiagram
  actor ä½¿ç”¨è€…

  æ©Ÿå°è»Ÿé«” ->> Server: å•Ÿå‹•å¾Œè©¢å•æ˜¯å¦æœ‰å°ˆæ¡ˆéœ€åŒæ­¥
  Server ->> æ©Ÿå°è»Ÿé«”: å›æ‡‰åŒæ­¥è³‡è¨Š
  æ©Ÿå°è»Ÿé«” ->> ä½¿ç”¨è€…: è‹¥æœ‰çš„è©±ï¼Œè©¢å•ä½¿ç”¨è€…
  ä½¿ç”¨è€… ->> æ©Ÿå°è»Ÿé«”: åŒæ„å¾Œï¼Œé–‹å§‹åŒæ­¥
  æ©Ÿå°è»Ÿé«” ->> æ©Ÿå°è»Ÿé«”: åŒæ­¥

  loop æ¯ç•¶æœ‰å°ˆæ¡ˆéœ€åŒæ­¥æ™‚
    Server ->> æ©Ÿå°è»Ÿé«”: é€šçŸ¥æœ‰æ–°çš„åŒæ­¥è³‡è¨Š
    æ©Ÿå°è»Ÿé«” ->> ä½¿ç”¨è€…: è‹¥æœ‰çš„è©±ï¼Œè©¢å•ä½¿ç”¨è€…
    ä½¿ç”¨è€… ->> æ©Ÿå°è»Ÿé«”: åŒæ„å¾Œï¼Œé–‹å§‹åŒæ­¥
    æ©Ÿå°è»Ÿé«” ->> æ©Ÿå°è»Ÿé«”: åŒæ­¥
  end

  loop æ¯ç•¶å­˜æª”æ™‚
    æ©Ÿå°è»Ÿé«” ->> Server: é€šçŸ¥Serveréœ€å‚™ä»½
  end
```

---

## ğŸ”¥ è»Ÿé«”æ›´æ–°æµç¨‹

```mermaid
sequenceDiagram
  actor ä½¿ç”¨è€…
  participant å®‰è£åŠ©æ‰‹
  è»Ÿé«” ->> Server: é€šçŸ¥Serverè»Ÿé«”å·²å•Ÿå‹•ï¼Œä¸¦å¸¶ä¸Šç¾åœ¨ç‰ˆè™Ÿ
  Server ->> è»Ÿé«”: å›æ‡‰ç‰ˆæœ¬è³‡è¨Š
  è»Ÿé«” ->> ä½¿ç”¨è€…: è‹¥æœ‰æ–°ç‰ˆï¼Œè©¢å•ä½¿ç”¨è€…æ˜¯å¦æ›´æ–°
  ä½¿ç”¨è€… ->> è»Ÿé«”: åŒæ„å¾Œï¼Œè«‹Serverä¸‹è¼‰æ–°ç‰ˆæœ¬
  è»Ÿé«” ->> Server: é€šçŸ¥ä¸‹è¼‰æ–°ç‰ˆæœ¬
  Server ->> Server: ä¸‹è¼‰ä¸­
  Server ->> è»Ÿé«”: å›æ‡‰ä¸‹è¼‰è³‡è¨Š
  è»Ÿé«” ->> ä½¿ç”¨è€…: è©¢å•ä½¿ç”¨è€…æ˜¯å¦ç«‹åˆ»å®‰è£æ›´æ–°
  ä½¿ç”¨è€… ->> è»Ÿé«”: å›æ‡‰åŒæ„
  è»Ÿé«” ->> å®‰è£åŠ©æ‰‹: åŒæ„å¾Œï¼Œé–‹å•Ÿå®‰è£åŠ©æ‰‹
  å®‰è£åŠ©æ‰‹ ->> è»Ÿé«”: é—œé–‰è»Ÿé«”
  å®‰è£åŠ©æ‰‹ ->> å®‰è£åŠ©æ‰‹: å®‰è£æ›´æ–°
  å®‰è£åŠ©æ‰‹ ->> è»Ÿé«”: é–‹å•Ÿè»Ÿé«”
```
=======
| åŠŸèƒ½                               | å–®æ©Ÿç‰ˆ | æ©Ÿè¯ç¶² |
| ---------------------------------- | ------ | ------ |
| ç”¨ USB è¤‡è£½å°ˆæ¡ˆè³‡æ–™å¤¾è‡³æ©Ÿå°è»Ÿé«”    | O      |O        |
| ç”¨ FTP è¤‡è£½å°ˆæ¡ˆè³‡æ–™å¤¾è‡³æ©Ÿå°è»Ÿé«”    | O      | O       |
| ç”¨ Server åŒæ­¥å°ˆæ¡ˆè³‡æ–™å¤¾è‡³æ©Ÿå°è»Ÿé«” |       | O      |
| ç”¨ Server å‚™ä»½å°ˆæ¡ˆè³‡æ–™             |        | O      |
| å¯ä½¿ç”¨ OTA æ›´æ–°                    |        | O      |
| å¯èˆ‡ ERP äº’å‹•                      |        | O      |
| å¯æœé›†åº«æˆ¶ç«¯è³‡æ–™                   |        | O      |
| å°ˆæ¡ˆæ¬Šé™åˆ†åˆ¥                       |        | O      |
>>>>>>> 9319f73b5d66d04fb836cc827e943e5e8707be84

---

## ğŸ”¥ è»Ÿé«”æµç¨‹

```mermaid
flowchart TB
  ç¨‹å¼é–‹å§‹ --> æ˜¯å¦ç‚ºå–®æ©Ÿç‰ˆ{æ˜¯å¦ç‚ºå–®æ©Ÿç‰ˆ}
  æ˜¯å¦ç‚ºå–®æ©Ÿç‰ˆ -- æ˜¯ --> é€²å…¥å–®æ©Ÿç‰ˆæ‡‰ç”¨ç¨‹å¼
  æ˜¯å¦ç‚ºå–®æ©Ÿç‰ˆ -- å¦ --> èˆ‡Serveré€£ç·š --> æ˜¯å¦èˆ‡Serveré€£ç·šæˆåŠŸ{æ˜¯å¦èˆ‡Serveré€£ç·šæˆåŠŸ}
  æ˜¯å¦èˆ‡Serveré€£ç·šæˆåŠŸ -- å¦ --> å ±éŒ¯
  æ˜¯å¦èˆ‡Serveré€£ç·šæˆåŠŸ -- æ˜¯ --> å–å¾—ç‰ˆæœ¬èˆ‡æ›´æ–°è³‡è¨Š
  å–å¾—ç‰ˆæœ¬èˆ‡æ›´æ–°è³‡è¨Š --> å–å¾—Serverä¸­éœ€åŒæ­¥çš„å°ˆæ¡ˆ --> è©¢å•æ˜¯å¦è¦åŒæ­¥ --> é€²å…¥æ©Ÿè¯ç¶²æ‡‰ç”¨ç¨‹å¼
```

---

## ğŸ”¥ å•é¡Œ

- å¦‚ä½•åˆ†è¾¨æ˜¯å¦ç‚ºå–®æ©Ÿç‰ˆï¼Ÿ
  - æ‡‰ç”¨ç¨‹å¼æœ¬èº«ç·¨è­¯ä¸åŒç‰ˆæœ¬
- å–®æ©Ÿç‰ˆç‰ˆæœ¬å¦‚ä½•å–å¾—æ›´æ–°è³‡è¨Šï¼Ÿ
  - æ‰‹å‹•æ›´æ–°
- å–®æ©Ÿç‰ˆå‡ç´šç‚ºæ©Ÿè¯ç¶²ç‰ˆæœ¬å¦‚ä½•åšï¼Ÿ
  - ä¸­å¤® Server ä½œç‚º App ä¼ºæœå™¨ proxy
